// Module included in the following assemblies:
//
// * documentation/doc-Migration_Toolkit_for_Virtualization/master.adoc

[id="migration-environment-requirements_{context}"]
= Migration environment requirements

Check your migration environment to ensure that the following requirements are met.

.VMware requirements

* VMware vSphere must be version 6.5 or later.
* You must install link:https://www.vmware.com/support/ws5/doc/new_guest_tools_ws.html[VMware Tools] on all source virtual machines (VMs).
* You must create a VMware Virtual Disk Development Kit (VDDK) image and add it to the `HyperConverged` custom resource (CR).
* If you are migrating more than 10 VMs from an ESXi host in the same migration plan, you must increase the NFC service memory of the host.

.{rhv-full} requirements

* {rhv-full} must be version 4.6.

.Source VM requirements

* ISO/CDROM disks must be unmounted.
* NICs must contain only one IPv4 and/or one IPv6 address.
* The VM name must contain only lowercase letters (`a-z`), numbers (`0-9`), or hyphens (`-`), up to a maximum of 253 characters. The first and last characters must be alphanumeric. The name must not contain uppercase letters, spaces, periods (`.`), or special characters.
* The VM name must not duplicate the name of a VM in the {virt} environment.
* The VM operating system must be certified and supported for use as a link:https://access.redhat.com/articles/973163#ocpvirt[guest operating system with {virt}] _and_ for link:https://access.redhat.com/articles/1351473[conversion to KVM with `virt-v2v`].

.Network requirements

* IP addresses, VLANs, and other network configuration settings must not be changed before or after migration. The MAC addresses of the virtual machines are preserved during migration.
* The network connections between the source environment, the {virt} cluster, and the replication repository must be reliable and uninterrupted.
* If you are mapping multiple source and target networks, each additional {virt} network must have its own link:https://docs.openshift.com/container-platform/{ocp-version}/virt/virtual_machines/vm_networking/virt-attaching-vm-multiple-networks.html#virt-creating-network-attachment-definition[network attachment definition].
* The firewalls must enable traffic over the following ports:

[cols="1,1,1,1,2a",options="header"]
.Network ports required for migrating from VMware vSphere
|===
|Port |Protocol |Source |Destination |Purpose

|443
|TCP
|OpenShift nodes
|VMware vCenter
|VMware provider inventory

Disk transfer authentication

|443
|TCP
|OpenShift nodes
|VMware ESXi hosts
|Disk transfer authentication

|902
|TCP
|OpenShift nodes
|VMware ESXi hosts
|Disk transfer data copy
|===

[cols="1,1,1,1,2a",options="header"]
.Network ports required for migrating from {rhv-full}
|===
|Port |Protocol |Source |Destination |Purpose

|443
|TCP
|OpenShift nodes
|{rhv-short} Engine
|{rhv-short} provider inventory

Disk transfer authentication

|443
|TCP
|OpenShift nodes
|{rhv-short} hosts
|Disk transfer authentication

|54322
|TCP
|OpenShift nodes
|{rhv-short} hosts
|Disk transfer data copy
|===
